  <div id="board1" :style="{borderTopColor:master_line_color}">
  <div id="board_line_parent">
    <div id="board_line">
      <i v-show="!is_master()" :style="{backgroundColor:line_color}"></i>
      <div v-if="is_master()" class="board_name master_big">{{ line_name }}</div>
      <div v-else class="board_name">{{ line_name }}</div>
    </div>
    <div id="board_edit" @click="mode_click()" ondragover="allowDrop(event)" ondrop="drop(event)"><div class="border_area" :data-tooltip="mode_txt()" data-position="right center"><i :class="mode_class()" class=" icon"></i></div></div>
  </div>
  <div id="board_tag_name">
    <div id="tag_name" v-if="metro_name">
      <i :style="{backgroundColor:line_color}"></i>
      <div id="tag_name_info">
        <div>{{metro_name}}</div>
        <div>資訊共 {{info_count}} 筆</div>
        <div>建立時間：<span>{{metro_create}}</span></div>
      </div>
    </div>
  </div>
  <div id="board3" style="color:#FF6900" :style="{borderTopColor:master_line_color}">
    <div id="board3_header" :style="{color:line_color}"><i class="heart icon"></i><span class="text">最愛連結</span>
    </div>
    <div id="board_favorites">
      <div class="favorites_list" v-for="(item, index) in info_favorites">
        <a :href="item.url_info.url" :title="item.url_info.title" target="_blank"  v-once>
          <span><img :src="item.url_info.ico"  v-once></span>
          <span v-once>{{item.url_info.title}}</span>
        </a>
      </div>
    </div>
    <div id="board_search">
      <div class="ui mini action input" :style="{borderColor:line_color}">
        <input v-model.trim="filter_search" type="text" placeholder="Filter...">
        <button v-if="filter_search" class="ui mini icon button" :style="{backgroundColor:line_color}" >
          <i class="filter icon"></i>
        </button>
        <button v-else class="ui mini icon button" >
          <i class="filter icon"></i>
        </button>
      </div>
    </div>
  </div>
</div>
<div id="board2" :style="{borderTopColor:master_line_color}">
  <div id="board_enter_parent">
    <div id="board_img"><img v-if="users.photo" :src="user_photo" v-once></div>
    <div id="board_enter">
      <textarea id="board_textarea" name="textarea1" placeholder="輸入資訊"></textarea>
    </div>
    <!--包成vue組件 輸入-->
    <div v-if="url_info" class="ui items">
      <div class="item" style="background-color: whitesmoke;width: 95%;">
        <div v-if="url_info.image" class="ui small image"><img :src="url_info.image"></div>
        <div class="content" style=" position: relative;padding-left: 1em;padding-right: 1em; padding-bottom: 8px;">
          <a href="{{url_info.url}}" target="_blank" class="header" style="margin-top: 6px;color:#000;    width: 240px;">{{url_info.title}}</a>
          <div class="meta"><span>{{url_info.url_parent}}</span></div>
          <!-- v-html有風險要改掉 -->
          <div v-if="url_info.description" class="extra" v-html="url_info.description"></div>
          <div>
            <a class="ui right corner label" @click="vm.url_info=''" :style="{borderColor:line_color}" >
              <i class="remove icon" style="color:#fff;cursor: pointer;"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
    <!--包成vue組件 輸入-->
  </div>
  <div id="board_send_parent">
    <div class="ui icon menu">
<!--
      <a class="item active">
        <i class="gamepad icon"></i>
      </a>
      <a class="item">
        <i class="video camera icon"></i>
      </a>
      <a class="item">
        <i class="video play icon"></i>
      </a>
-->
      <div class="right item">
        <div id="board_send" :style="{backgroundColor:line_color}" @click="new_info()" class="ui mini orange button">送出</div>
      </div>
    </div>
  </div>
  <div id="board_info">
<!--    <div v-if="info_loading" class="ui active centered inline loader" style="margin-top:35px;margin-bottom:35px;"></div>-->
<!--   https://semantic-ui.com/elements/label.html-->
    <div v-for="(item, index) in info_sort_filter" class="board_list ui vertical segment clear">
<!--
      <span class="ui left corner label">
        <i class="youtube play icon"></i>
      </span>
-->
      <div @dblclick="edit_info(item)">
        <img class="ui left floated image transition mini" :src="user_photo" v-once>
        <p class="info_message content" v-html="$options.filters.message_filter(item.message)"></p>
        <p class="content textarea ui form" :style="{borderColor:line_color}">
          <textarea></textarea>
          <span class="textarea_prompt" >
            <span class="esc">Esc離開編輯</span>
            <button class="send mini ui button" :style="{backgroundColor:line_color}">送出</button>
            <button class="cancel mini ui button">取消</button>
          </span>
        </p>
        <span class="right_icon">
          <span :style="{color : line_color}"><i @click="favorite_info(item)" :class="{active : item.favorite }" class="like icon" :style="{color : line_color}"></i></span>
          <i @click="delete_info(item['.key'])" class="trash icon"></i>
        </span>
        <!--包成vue組件 顯示-->
        <div v-if="item.url_info" class="ui items" style="margin-top:15px;">
          <div class="item" style="background-color: whitesmoke;width: 98%;">
            <div v-if="item.url_info.image" class="ui small image"><img :src="item.url_info.image"></div>
            <div class="content" style=" position: relative;padding-left: 1em;padding-right: 1em; padding-bottom: 8px;">
              <a href="{{item.url_info.url}}" target="_blank" class="header" style="margin-top: 6px; width: 240px;">{{item.url_info.title}}</a>
              <div class="meta"><span>{{item.url_info.url_parent}}</span></div>
              <!-- v-html有風險要改掉 -->
              <div v-if="item.url_info.description" class="extra" v-html="item.url_info.description"></div>
              <div>
                <a class="ui right corner label" :style="{borderColor:line_color}" >
                  <i class="remove icon" style="color:#fff;cursor: pointer;"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
        <!--包成vue組件 顯示-->
      </div>
      <div class="delete_info ui dimmer">
        <div class="content">
          <div class="center">
            <i class="trash outline icon" style="color:#fff;font-size: 1.8em;margin-bottom: 13px;cursor: default"></i>
            <div style="margin-bottom:20px;">確定要刪除資料？</div>
            <button class="send mini ui button" :style="{backgroundColor:line_color}">刪除</button>
            <button class="cancel mini ui button">取消</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 
<script>
  function drop(ev){
    var index = ev.dataTransfer.getData("index");
	print(index);
    vm.delete_metro(index);
  }  
  function allowDrop(event) { //拖曳的物件移到上面
    print("拖曳的物件移到上面")
    event.preventDefault();
  }

  $(function(){
    //鍵盤按下去
    $("#board_textarea").keydown(function(e){

    })
    $("#board_textarea").keyup(function(e) {
      $(this).height(70);
      $(this).height(this.scrollHeight + parseFloat($(this).css("borderTopWidth")) + parseFloat($(this).css("borderBottomWidth")));

    });
    $("#board_textarea").on('paste', function () {
        var domTextarea = this,
            txt = domTextarea.value,
            startPos = domTextarea.selectionStart,
            endPos = domTextarea.selectionEnd,
            scrollTop = domTextarea.scrollTop;
            domTextarea.value = '';
        setTimeout(function () {
          var pastedValue = domTextarea.value;
          domTextarea.value = txt.substring(0, startPos) + pastedValue + txt.substring(endPos, txt.length);
          domTextarea.focus();
          domTextarea.selectionStart = domTextarea.selectionEnd = startPos + pastedValue.length;
          domTextarea.scrollTop = scrollTop;
          var urlify_url=urlify(pastedValue);	
          if(urlify_url.indexOf("<a href=")>-1){
            var url=urlify_url.split("</a>")[0].split(">")[1];
            parse_url(url,function(url_info){
              vm.url_info=url_info;
            });
          }
        }, 0);
    });
  })
function urlify(text) {
	//http://stackoverflow.com/questions/1500260/detect-urls-in-text-with-javascript
    var urlRegex = /(https?:\/\/[^\s]+)/g;
    return text.replace(urlRegex, function(url) {
        return '<a href="' + url + '">' + url + '</a>';
    })
    // or alternatively
    // return text.replace(urlRegex, '<a href="$1">$1</a>')
}

  
</script>