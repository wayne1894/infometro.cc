function urlify(t){return t.replace(/(https?:\/\/[^\s]+)/g,function(t){return'<a href="'+t+'">'+t+"</a>"})}function textarea_paste(){if(!vm.url_info){var t=this,e=t.value,o=t.selectionStart,n=t.selectionEnd,i=t.scrollTop;t.value="",setTimeout(function(r){var a=t.value;t.value=e.substring(0,o)+a+e.substring(n,e.length),t.focus(),t.selectionStart=t.selectionEnd=o+a.length,t.scrollTop=i;var s=urlify(a);if(s.indexOf("<a href=")>-1){var l=s.split("</a>")[0].split(">")[1];$("#board_enter .world.icon").show(),$("#board_enter .idea.icon").hide(),parse_url(l,function(t){t&&(vm.url_info=t),$("#board_enter .world.icon").hide()})}},0)}}function textarea_paste2(t,e){var o=t.value,n=t.selectionStart,i=t.selectionEnd,r=t.scrollTop;t.value="",setTimeout(function(){var a=t.value;t.value=o.substring(0,n)+a+o.substring(i,o.length),t.focus(),t.selectionStart=t.selectionEnd=n+a.length,t.scrollTop=r;var s=urlify(a);if(s.indexOf("<a href=")>-1){parse_url(s.split("</a>")[0].split(">")[1],function(t){e.url_info=t})}},0)}function parse_url(t,e){$.get("https://54.250.245.226/infometro.asp?url="+t,function(o){var n=document.createElement("iframe");n.id="iframe",n.style.display="none",$(document.body).append(n);var i=document.getElementById("iframe");i=i.contentWindow||i.contentDocument.document||i.contentDocument,i.document.open(),i.document.write(o),i.document.close();for(var r={},a=$("#iframe")[0].contentWindow.document.getElementsByTagName("meta"),s=0;s<a.length;s++)"description"==a[s].getAttribute("name")?r.description=a[s].getAttribute("content"):"og:description"==a[s].getAttribute("property")?r.og_description=a[s].getAttribute("content"):"og:image"==a[s].getAttribute("property")?r.og_image=a[s].getAttribute("content").split(",")[0]:"og:title"==a[s].getAttribute("property")&&(r.og_title=a[s].getAttribute("content"));if(void 0==r.og_image&&o.indexOf("og:image")>-1){var l=o.split("og:image")[1].split(">")[0];l=l.replace(/\'/gi,'"'),l=l.split('content="')[1].split('"')[0],r.og_image=l}if(void 0==r.og_description&&o.indexOf("og:description")>-1){var l=o.split("og:description")[1].split(">")[0];l=l.replace(/\'/gi,'"'),l=l.split('content="')[1].split('"')[0],r.og_description=l}if(void 0==r.og_title&&o.indexOf("og:title")>-1){var l=o.split("og:title")[1].split(">")[0];l=l.replace(/\'/gi,'"'),l=l.split('content="')[1].split('"')[0],r.og_title=l}r.og_title?r.title=r.og_title:(r.title=$(document.getElementById("iframe").contentWindow.document).find("title").html(),void 0==r.title&&(r.title="")),r.og_description&&(r.description=r.og_description),r.og_image&&(r.image=r.og_image),delete r.og_title,delete r.og_description,delete r.og_image,r.url=t,r.url_parent=t.split("://")[1].split("/")[0],t.indexOf(".youtube.")>-1?r.youtube=t.split("?v=")[1].split("&")[0]:t.indexOf("youtu.be/")>-1&&(r.youtube=t.split("be/")[1]),r.ico="https://www.google.com/s2/favicons?domain_url="+t,$("#iframe").remove(),"function"==typeof e&&e(r)}).fail(function(){"function"==typeof e&&e()})}function line_over(t){var e=t.target;document.body.style.cursor="e-resize",$(e).on("mousedown",function(t){document.body.style.cursor="e-resize",$(document).on("selectstart",function(){return!1}),$(document).on("dragstart",function(){return!1});var o=t.screenX,n=t.screenY,i=$("#right");$(document).on("mousemove.line",function(t){var e=i.width()+(o-t.screenX);e<270&&(e=270),id("right").style.width=e+"px",o=t.screenX,n=t.screenY}),$(document).on("mouseup.line",function(t){document.body.style.cursor="auto",$(e).off("mousedown"),$(document).off("mousemove.line"),$(document).off("mouseup.line"),$(document).off("selectstart"),$(document).off("dragstart")})}),$(e).on("mouseout",function(t){document.body.style.cursor="auto",$(e).off("mouseout"),$(e).off("mousedown")})}var b1_left=parseInt($("#board1").css("left")),b2_left=parseInt($("#board2").css("left")),b3_left=parseInt($("#board3").css("left"));$(window).resize(function(){$(window).width();if($("#top").css("width",$("#center").width()),$("#main").width()<1260){$("#board3").addClass("board3_left");var t=($("#center").width()-860)/2;$("#board1").css("left",b1_left+t),$("#board2").css("left",b2_left+t)}else{$("#board3").removeClass("board3_left");var t=($("#center").width()-1175)/2;t<0&&(t=0),$("#board1").css("left",b1_left+t),$("#board2").css("left",b2_left+t),$("#board3").css("left",b3_left+t)}setTimeout(move_center,0)}).resize();var sortable=[];$(function(){sortable.line_master=new Sortable(id("line_drag_master"),{animation:150,forceFallback:!1}),sortable.line=new Sortable(id("line_drag"),{animation:150,forceFallback:!1,setData:function(t,e){t.setData("line_key",$(e).data("key")),t.setData("line_key",$(e).data("key"))},onStart:function(){vm.mode=1.5},onEnd:function(t){setTimeout(function(){vm.swap_list(t.oldIndex,t.newIndex),vm.mode=1},5)}}),sortable.metro=new Sortable(id("top_tag"),{animation:50,forceFallback:!1,filter:".add",setData:function(t,e){t.setData("key",$(e).data("key"))},onStart:function(t){var e=$("#top_tag");$("#top_tag_parent").css("left",e.css("left")),e.addClass("left_inherit"),e.find(".add").hide(),0==t.oldIndex?e.addClass("first_drag"):t.oldIndex==$("#top_tag li").length-2&&e.addClass("last_drag"),vm.mode=1.5},onEnd:function(t){var e=$("#top_tag");e.find(".add").show(),setTimeout(function(){e.removeClass("left_inherit")},100),e.removeClass("first_drag").removeClass("last_drag"),setTimeout(function(){vm.swap_metro(t.oldIndex,t.newIndex),vm.mode=1},5)}})}),$(function(){$("#right .right_main").perfectScrollbar(),$(".logo").jrumble({x:2,y:2,opacity:!0,opacityMin:.5}).hover(function(){$(this).trigger("startRumble")},function(){$(this).trigger("stopRumble")}),setTimeout(function(){$(".nav_i:not(.custom)").popup({on:"click"})},5),setTimeout(function(){$(".nav_i.custom").popup({popup:$(".custom.popup"),on:"click"})},5),$("#right .right_line").on("mouseover",line_over)});